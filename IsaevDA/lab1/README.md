# Практическая работа №1. Обработка изображений с использованием библиотеки OpenCV

## Описание программы

Программа позволяет загружать изображение и применять к нему различные фильтры: **оттенки серого**, **изменение разрешения**, **сепия**, **виньетка**, и **пикселизация**. Фильтры реализованы с использованием библиотеки OpenCV, и результаты сохраняются в отдельный файл.

## Алгоритм фильтров

### 1. **Фильтр оттенков серого (Grayscale)**

Фильтр преобразует изображение в оттенки серого, используя известную формулу:
```math
Y = 0.3 * R + 0.59 * G + 0.11 * B
```

Здесь используются коэффициенты для каждой из цветовых компонент, чтобы получить взвешенную среднюю интенсивность света. Это дает более естественное восприятие человеческим глазом, так как зеленый цвет воспринимается ярче, чем красный или синий.

### 2. **Изменение разрешения (Resize)**

Фильтр уменьшает разрешение изображения в 2 раза по обоим осям. Это реализуется путем выборки каждого второго пикселя как по горизонтали, так и по вертикали, создавая новое изображение с уменьшенными размерами. Каждый цветовой канал (RGB) обрабатывается отдельно.

### 3. **Сепия (Sepia)**

Фильтр добавляет "сепийный" эффект, придавая изображению теплый, коричневатый оттенок. Для каждой пиксельной точки цвета (R, G, B) вычисляются новые значения:
```
R' = 0.393 * R + 0.769 * G + 0.189 * B
G' = 0.349 * R + 0.686 * G + 0.168 * B
B' = 0.272 * R + 0.534 * G + 0.131 * B
```
Новые значения ограничиваются диапазоном от 0 до 255, чтобы избежать артефактов.

### 4. **Виньетка (Vignette)**

Фильтр добавляет виньетку путем затемнения краев изображения. Это достигается с помощью гауссовой маски, центр которой находится в центре изображения, а интенсивность снижается по мере удаления от центра. Маска применяется к каждому цветовому каналу отдельно.

### 5. **Пикселизация (Pixelation)**

Фильтр пикселизирует центральную часть изображения. Область изображения делится на блоки фиксированного размера (например, 30x30 пикселей), и для каждого блока вычисляется средний цвет, которым замещаются все пиксели данного блока. Это создает эффект низкого разрешения.

## Описание команд

Программа использует интерфейс командной строки, в котором можно указать режим работы, фильтр, путь к входному изображению и имя выходного файла. Ниже приводится описание всех поддерживаемых команд и аргументов.

### Общий формат команды:

```
python script.py --mode <режим> --func <фильтр> --image <путь к изображению> --output <имя выходного файла>
```

### Аргументы:

- `--mode` или `-m`: Режим работы программы. Возможные значения:
  - `image`: Режим просмотра изображения без обработки. Позволяет открыть и просмотреть исходное изображение в отдельном окне. Режим по умолчанию (можно не ставить флаг `--mode` или `-m`).
  - `imgproc`: Режим обработки изображения с применением фильтров.

- `--func` или `-f`: Указывает фильтр, который нужно применить при выборе режима `imgproc`. Возможные фильтры:
  - `grayscale`: Применяет фильтр оттенков серого.
  - `resize`: Изменяет размер изображения, уменьшая его в два раза.
  - `sepia`: Применяет сепийный эффект.
  - `vignette`: Добавляет эффект виньетки (затемнение краев изображения).
  - `pixelation`: Применяет пикселизацию к центральной области изображения.

- `--image` или `-i`: Путь к входному изображению, которое необходимо обработать или просмотреть.

- `--output` или `-o`: Имя выходного файла, в который будет сохранено обработанное изображение. Если не указано, по умолчанию файл будет сохранен как `image_out.jpg`. Если файл с таким именем уже существует, будет сгенерировано уникальное имя (например, `image_out_1.jpg`).

### Пример использования

Для запуска программы с фильтром оттенков серого:
```
python image_processing.py --mode imgproc --func grayscale --image input.jpg --output output.jpg
```

Для просмотра исходного изображения:
```
python image_processing.py -i input.jpg
```