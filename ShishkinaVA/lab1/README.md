# Практическая работа №1. Обработка изображений с использованием библиотеки OpenCV

## Описание структуры программы

Программа позволяет выполнять фильтрацию изображений. Она содержит: 
- `функцию для парсинга аргументов командной строки`
- `функцию для загрузки изображения`
- `функция перевода изображения в оттенки серого`
- `функцию изменения разрешения изображения`
- `функцию применения фотоэффекта сепии к изображению`
- `функцию применения фотожффекта виньетки к изображению`
- `функцию пикселизации заданной прямоугольной области изображения`
- `главную функцию программы`

## Описание алгоритмов

### Функция для парсинга аргументов командной строки

- `"-m" или "--mode": указывает режим работы программы`
- `"-i" или "--image": указывается путь к изображению, которое будет обрабатывваться`
- `"o" или "output": указывается имя выходного изображения`
- `"--value": значение, которое используется в фильтре изменения разрешения изображения`
- `"--x1", "--x2": определяет границы области по оси OX`
- `"--y1", "--y2": определяет границы области по оси OY`
- `"--pix": устанавливает размер пикселя, используется в фильтре пикселезации заданной прямоугольной области изображения`

### Функция для загрузки изображения

Данная функция  предназначена для загрузки, отображения и сохранения изображения с использованием библиотеки OpenCV. 

- `Параметры функции: строка, содержащая путь к изображению, которое нужно загрузить, а также строка, указывающая имя выходного файла, в которое будет сохранено изображение.`
- `Функция cv.imread() используется для чтения изображения из указанного пути, если его невозможно загрузить, то вызывается исключение.`
- `Функция image.shape позволяет получить размеры изображения и количество цветных каналов.`
- `Функция cv.imshow() позволяет открыть окно и показать загруженное изображение с указанным заголовком.`
- `Функция cv.waitKey(0) ожидает нажатия клавиши, что позволяет пользователю увидеть изображение до закрытия окна.`
- `Функция cv.imwrite() позволяет сохранить изображение.`
- `Функция cv.destroyAllWindows() позволяет закрыть все открытые окна.`

### Функция перевода изображения в оттенки серого

Данный фильтр позволяет перевести исходное изображение в оттенки серого с использованием определенного коэффиуиента для каждого канала. Параметрами данной функции являются строка, содержащая путь к изображению, которое нужно загрузить, а также строка, указывающая имя выходного файла, в которое будет сохранено изображение. Для каждого пикселя изображения извлекаются значения цветовых каналов RGB и вычисляется коэффициент градации серого по формуле:
```math
coeff = 0.299 * R + 0.587 * G + 0.114 * B
```
Также используются функции для чтения изображения, для получения размеров и количества цветных каналов изображения, для отображения изображений (исходного и отфильтрованного), для сохранения изображения.

### Функция изменения разрешения изображения

Данная функцмя мзменяет разрешение изображения, увеличивая или уменьшая его размер в зависимости от заданного коэффициента. Ее параметрами являются строка, содержащая путь к исходному изображению, строка, указывающая имя выходного файла для сохранения измененного изображения, а также коэффициент изменения разрешения (должен быть больше нуля). Для каждого пикселя в новом изображении вычисляются соответствующие индексы в исходном изображении, значение пикселя из исходного изображения копируется в новое изображение.

Аналогично предыдущей функции используются функции для чтения, отображения, сохранения изображения и т.д.

### Функция применения фотоэффекта сепии к изображению

Данная функция применяет сепийный фильтр к изображению, изменяя его цветовую палитру для создания эффекта старинной фотографии. Ее параметрами являются строка, содержащая путь к исходному изображению, а также строка, указывающая имя выходного файла для сохранения измененного изображения. Для каждого пикселя извлекаются его значения цветовых каналов, затем вычисляются новые значения для каждого канала в соответствии с формулами фильтра сепии.
```math
canalR = 0.393 * R + 0.769 * G + 0.189 * B
```
```math
canalG = 0.349 * R + 0.686 * G + 0.168 * B
```
```math
canalB = 0.272 * R + 0.534 * G + 0.131 * B
```
Аналогично предыдущей функции используются функции для чтения, отображения, сохранения изображения и т.д.

### Функция применения фотоэффекта виньетки к изображению

Данная функция применяет фильтр виньетки к изображению, создавая плавный переход от полного яркости в центре к затемнению по краям. Ее параметрами являются строка, содержащая путь к исходному изображению, а также строка, указывающая имя выходного файла для сохранения измененного изображения. Для каждого пикселя вычисляются значения, которые определяют степень затемнения по горизонтали и вертикали. Затем новое значение пикселя вычисляется как произведение исходного значения пикселя и коэффициентов затемнения. Чем дальше пиксель находится от центра изображения, тем темнее он становится.

Формула для рассчета коэффициентов затемнения:
```math
coefX = 1 - (| j - centrX| / centrX),
```
```math
coefY = 1 - (| i - centrY| / centrY),
```
где centrX - центральная координата по оси OX, centrY - центральная координата по оси OY, i,j - координаты рассматриваемого пикселя.

Аналогично предыдущей функции используются функции для чтения, отображения, сохранения изображения и т.д.

### Функция пикселизации заданной прямоугольной области изображения

Данная функция предназначена для применения эффекта пикселизации к изображению в заданной области. Ее параметрами являются строка, содержащая путь к исходному изображению, строка, указывающая имя выходного файла для сохранения измененного изображения, а также координаты заданной области. Алгоритм проходит по заданной области изображения, разделяя её на небольшие участки. Для каждого участка вычисляется средний цвет, который представляет собой усредненные значения цветовых каналов. Полученный средний цвет затем заполняет весь участок, создавая эффект пикселизации.

Аналогично предыдущей функции используются функции для чтения, отображения, сохранения изображения и т.д.

### Главная функция программы

В этой функции происходит обработка изображений в зависимости от выбранного режима. Сначала необходимо задать параметры через командную строку, затем, в зависимости от выбранного режима, выполняются вызовы различных функций, описанных выше. Если режим не поддерживается, то программа выдаст ошибку, информируя о том, что такого режима не существует. 

